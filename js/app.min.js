settingColor();
lkTabs();
burger();
footer();

// меню бургер
function burger() {
  $(document).ready(function () {
    $(".header__burger").click(function name(event) {
      $(".header__burger,.header__menu").toggleClass("burger-active");
    });
  });
}

// подвал
function footer() {
  if (window.screen.width < 992) {
    $(document).ready(function () {
      $(".block__title").click(function name(event) {
        $(this).toggleClass("footer-active").next().slideToggle(300);
      });
    });
  }
}

function settingColor() {
  const colorsItem = Array.from(document.querySelectorAll(".color"));

  if (colorsItem[0]) {
    colorsItem.forEach((el) => {
      let currColor = el.dataset.color;
      el.style.background = currColor;
    });
  }
}

function lkTabs() {
  const tabsLkButtons = Array.from(
    document.querySelectorAll(".aside-lk__button")
  );
  const tabsLkBlocks = Array.from(document.querySelectorAll("._lk__tabs"));

  if (tabsLkButtons[0]) {
    tabsLkButtons[0].parentNode.classList.add("active");
    tabsLkBlocks[0].style.display = "block";
    tabsLkButtons.forEach((btn) => {
      btn.addEventListener("click", openTabs);
      function openTabs(e) {
        removeActiveClass(tabsLkButtons, tabsLkBlocks);
        let currentBLockId = this.dataset.id;
        let currentBLock = document.querySelector(`#${currentBLockId}`);

        this.parentNode.classList.add("active");
        currentBLock.style.display = "block";
      }

      function removeActiveClass(btns, blocks) {
        btns.forEach((btn) => {
          btn.parentNode.classList.remove("active");
        });
        blocks.forEach((block) => {
          block.style.display = "none";
        });
      }
    });
  }
}

$(document).ready(function () {
  $(".hide__title").click(function name(event) {
    $(this).toggleClass("active").next().slideToggle(300);
  });
});

const catalogFilter = document.querySelector(".filter-catalog-intro-bottom");
const catalogFilterHide = document.querySelector(
  ".filter-catalog-intro-bottom__hide"
);

if (catalogFilter) {
  catalogFilter.addEventListener("click", toggleActiveClass);

  console.log(catalogFilter.children);

  function toggleActiveClass(e) {
    // Плюс или текст
    if (e.target === this.children[0] || e.target === this.children[1]) {
      catalogFilter.classList.toggle("active");
      catalogFilterHide.classList.toggle("active");
    }
  }
}

const headerCartLink = document.querySelector(".header__links__cart");
const headerCartBlock = document.querySelector(".cart-header");

if (headerCartLink) {
  headerCartLink.addEventListener("click", addActiveClass);
  function addActiveClass(e) {
    headerCartBlock.classList.toggle("active");
    e.preventDefault();
    if (!e.target.classList.contains("header__links__cart")) {
      $(document).mouseup(function (e) {
        let container = $(headerCartBlock);
        if (container.has(e.target).length === 0) {
          headerCartBlock.classList.remove("active");
        }
      });
    }
  }
}

$(document).ready(function () {
  $(".pgwSlider").pgwSlider({
    displayControls: true,
    listPosition: "left",
  });
});
const slider = document.querySelector(".slider");
if (slider) {
  $(document).ready(function () {
    $(".slider").slick({
      dots: true,
      infinite: true,
      autoplay: true,
      autoplaySpeed: 3000,
      slidesToShow: 1,
      arrows: false,
    });
    $(".single-item").slick();
  });
}
